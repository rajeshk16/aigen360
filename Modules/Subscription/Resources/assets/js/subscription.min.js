'use strict';$(function(){function a(a){var b=$("#"+a).attr("data-id");$("#theme-title").html(b)}function b(){let a=document.querySelector("#usecase-category"),b=document.querySelector("#usecase-template");a.setCustomValidity(""),b.setCustomValidity(""),$("#usecase-category").siblings(".error").remove(),$("#usecase-template").siblings(".error").remove()}function c(a){var b=$.Deferred();return $.ajax({url:SITE_URL+"/package/get-info/"+a,type:"get",success:function(a){b.resolve(a)}}),b.promise()}function d(a){a&&$("#renewable").val(a.renewable)}function e(a){if(a){var b=$("#billing_cycle").val(),c=0<a.discount_price[b]?a.discount_price[b]:a.sale_price[b];$("#billing_price, #amount_billed").val(c),"Paid"==$("#payment_status").val()?($("#amount_received").val(c),$("#amount_due").val(0)):($("#amount_due").val(c),$("#amount_received").val(0)),"days"==b?($("#duration_days").removeClass("d-none"),$("#duration").val(a.duration).attr("readonly",!0)):($("#duration_days").addClass("d-none"),$("#duration").val("").attr("readonly",!0))}}function f(a){var b=1,c=$("#billing_cycle").val();b="days"==c?a.duration:m[c],($("#subscription-add-container").length||$("#subscription-edit-container").length)&&$("input[name=\"next_billing_date\"]").daterangepicker({singleDatePicker:!0,showDropdowns:!0,startDate:moment().add(b,"day"),minDate:moment().add(1,"day"),locale:{format:"YYYY-MM-DD"}})}function g(a){for(const b in $("#billing_cycle").html(""),a.billing_cycle)1==a.billing_cycle[b]&&$("#billing_cycle").append(`
                    <option value="${b}">${b.charAt(0).toUpperCase()+b.slice(1)}</option>
                `);$(".select2-hide-search").select2({minimumResultsForSearch:1/0})}function h(a,b=!0){var c=$(a).closest(".billing-parent").find("input[type=\"text\"]");c.attr("readonly",b),b&&c.val(null)}function i(){let a=document.querySelector("#chat-category"),b=document.querySelector("#chat-template");a.setCustomValidity(""),b.setCustomValidity(""),$("#chat-category, #chat-template").siblings(".error").remove()}function j(){"lifetime"==$("#billing_cycle").val()?($(".next-billing-date").hide(),$(".activation-date, .billing-date").addClass("col-md-6").removeClass("col-md-4")):($(".next-billing-date").show(),$(".activation-date, .billing-date").addClass("col-md-4").removeClass("col-md-6"))}var k=["v-pills-general-tab","v-pills-optional-tab","v-pills-optionals-tab","v-pills-usecase-tab"];if("undefined"!=typeof dynamic_page){k=["v-pills-general-tab"];for(const a of dynamic_page)k.push(`v-pills-${a}-tab`)}$(document).on("click",".tab-name",function(){var a=$(this).attr("data-id");$("#theme-title").html(a)}),$(document).on("click","button.switch-tab",function(){$("#"+$(this).attr("data-id")).tab("show");var b=$(this).attr("data-id");a(b),$(".tab-pane[aria-labelledby=\"home-tab\"").addClass("show active"),$("#"+$(this).attr("id")).addClass("active").attr("aria-selected",!0)});var l=setInterval(()=>{$("#btnGroupDrop1").length&&($("#btnGroupDrop1").css("display","none"),$(".btn-group").css({display:"inline-block"}),$("#dataTableBuilder_length").css({"margin-top":"-20px"}),clearInterval(l))},100);$(document).on("keyup",".int-number",function(){let a=$(this).val();a=a.substring(0,8),"-"==a?$(this).val("-"):a.includes("-1")?$(this).val("-1"):$(this).val(a.replace(/[^0-9]{1,8}/g,""))}),$(".package-submit-button, .package-feature-submit-button, .credit-submit-button").on("click",function(){setTimeout(()=>{for(const c of k)if($("#"+c.replace("-tab","")).find(".error").length){var b=$("#"+c.replace("-tab","")).attr("aria-labelledby");$("#"+b).tab("show"),a(b);break}},100)}),$(".add-feature-nav").on("click",function(){var a=$(this).attr("data-count"),b=$("#add-feature-nav").find("li a");b.attr("id",`v-pills-${a}-tab`).attr("href",`#v-pills-${a}`).attr("aria-controls",`v-pills-${a}`).attr("data-id",jsLang("Custom")+a),b.text(jsLang("Custom")+a),$(this).attr("data-count",+a+1),$(this).before($("#add-feature-nav").html());var c=$("#add-feature-data");c.find(".tab-pane").attr("id",`v-pills-${a}`).attr("aria-labelledby",`v-pills-${a}-tab`),c.find(".type").attr("name",`meta[custom${a}][type]`),c.find(".title").attr("name",`meta[custom${a}][title]`),c.find(".description").attr("name",`meta[custom${a}][description]`),c.find(".is_visible").attr("name",`meta[custom${a}][is_visible]`).addClass("select2-dynamic"),c.find(".status").attr("name",`meta[custom${a}][status]`).addClass("select2-dynamic"),$("#topNav-v-pills-tabContent").append(c.html()),$("#add-feature-data").find(".is_visible, .status").removeClass("select2-dynamic"),$(".select2-dynamic").select2({minimumResultsForSearch:1/0})}),$(document).on("click",".custom-feature-nav .close",function(){$("#v-pills-general-tab").tab("show"),a("v-pills-general-tab");var b=$(this).siblings("a").attr("aria-controls");$(this).closest(".custom-feature-nav").remove(),$("#"+b).remove()}),$("#subscription-add-container").length&&($("input[name=\"activation_date\"]").daterangepicker(dateSingleConfig()),$("input[name=\"billing_date\"]").daterangepicker(dateSingleConfig()),$("input[name=\"next_billing_date\"]").daterangepicker({singleDatePicker:!0,showDropdowns:!0,startDate:moment().add(1,"day"),minDate:moment().add(1,"day"),locale:{format:"YYYY-MM-DD"}})),$("#subscription-edit-container").length&&($("input[name=\"activation_date\"]").daterangepicker(dateSingleConfig($("input[name=\"activation_date\"]").val())),$("input[name=\"billing_date\"]").daterangepicker(dateSingleConfig($("input[name=\"billing_date\"]").val())),$("input[name=\"next_billing_date\"]").daterangepicker(dateSingleConfig($("next_input[name=\"billing_date\"]").val()))),$(".select2#usecase-category").on("select2:select",function(a){var c=a.params.data;b(),$.ajax({url:SITE_URL+"/package/get-templates/"+c.id,type:"get",success:function(a){for(const c of a.data){var b=new Option(c.name,c.slug,!1,!0);$(".select2#usecase-template").append(b)}}})}),$(".select2#usecase-category").on("select2:unselect",function(a){var b=a.params.data;$.ajax({url:SITE_URL+"/package/get-templates/"+b.id,type:"get",success:function(a){for(const b of a.data)$(".select2#usecase-template option[value=\""+b.slug+"\"]").remove()}})}),$(document).on("click","#email_invoice",function(a){a.preventDefault(),parent=this,$(this).attr("disabled",!0).find(".feather").addClass("icon-loader"),$.ajax({url:$(parent).attr("url"),type:"get",success:function(a){let b=a.status?"alert-success":"alert-danger",c=a.status?"alert-danger":"alert-success";$(".top-notification").removeClass("d-none").find(".alert").addClass(b).removeClass(c).find(".alertText").text(a.message)},complete:function(){$(parent).removeAttr("disabled").find(".feather").removeClass("icon-loader")}})});const m={lifetime:0,yearly:365,monthly:30,weekly:7};if($(".select2#package_id").on("select2:select",function(a){var b=a.params.data.id,h=c(b);h.done(function(a){d(a),g(a),e(a),f(a),j()})}),$("#subscription-add-container").length){var n=c($(".select2#package_id").val());n.done(function(a){d(a),g(a),e(a),f(a),j()})}$(".select2-hide-search#billing_cycle").on("select2:select",function(){var a=$(this).val();"days"==a?$("#duration_days").removeClass("d-none"):$("#duration_days").addClass("d-none");var b=c($(".select2#package_id").val());b.done(function(a){d(a),e(a),f(a)})}),$(".select2-hide-search#payment_status").on("select2:select",function(a){var b=a.params.data.text,c=$("#billing_price").val();"Paid"==b?($("#amount_received").val(c),$("#amount_due").val(0)):($("#amount_received").val(0),$("#amount_due").val(c))}),$(".billing-checkbox").on("change",function(){$(this).is(":checked")?h(this,!1):h(this,!0)}),$(".select2#chat-category").on("select2:select",function(a){var b=a.params.data;i(),$.ajax({url:SITE_URL+"/package/get-chats/"+b.id,type:"get",success:function(a){for(const c of a.data){var b=new Option(c.name,c.code,!1,!0);$(".select2#chat-template").append(b)}}})}),$(".select2#chat-category").on("select2:unselect",function(a){var b=a.params.data;$.ajax({url:SITE_URL+"/package/get-chats/"+b.id,type:"get",success:function(a){for(const b of a.data)$(".select2#chat-template option[value=\""+b.code+"\"]").remove()}})}),$("#billing_cycle").on("change",function(){j()})});
