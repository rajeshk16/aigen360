"use strict";const slugify=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"");function formValidation(){return!1!==validateCheck(["#name","#description","#input_template"])&&($("#btnSubmit").text(jsLang("Updating")).append('<div class="spinner-border spinner-border-sm ml-2" role="status"></div>').addClass("disabled-btn"),!0)}$((()=>{$(".ajax_category").select2({ajax:{url:"undefined"==typeof searchCategoryUrl?"":searchCategoryUrl,dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e,t){return{results:e.data}},cache:!0},placeholder:jsLang("Search categories"),allowClear:!0,minimumInputLength:0}),$(".ajax_users_filter_select2").select2({ajax:{url:"undefined"==typeof searchURI?"":searchURI,dataType:"json",delay:250,data:function(e){return{q:e.term}},processResults:function(e,t){return{results:e.data}},cache:!0},placeholder:jsLang("Search creator"),allowClear:!0,minimumInputLength:3}),$("#name").on("input",(e=>{e.target.value.length>0?$("#slug-span").text(e.target.value.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")):$("#slug-span").text("(auto-generated)")}))}));let count=$("#optionId").val();function addFields(e){var t=$("#field-container");if($(t).find("div.row").last().length>0)var n=$(t).find("div.row").last();else n=$(e).closest("div.row");var i=n.find('input[name="names[]"]').first(),l=n.find('input[name="descriptions[]"]').first(),a=n.find('select[name="type[]"]').first();let s=[];if(""===i.val().trim()||""===l.val().trim()||""===a.val().trim())return validateCheck(s),!1;var r="input-field-"+count;let o='<span onclick="insertText(this)" id="'+r+'-button" class="btn btn-primary mr-4 mb-2">'+r+"</span>";$("#field-button").append(o);const d=`<div class="row mt-3">\n                            <div class="col-xl-4 col-md-6 col-12">\n                                <input type="text" class="form-control inputFieldDesign new-field" name="names[]" id="input-field-${count}" placeholder="${jsLang("Label Name")}" maxlength="191" oninput="addButton(this)" oninvalid="this.setCustomValidity('${jsLang("This field is required.")}')" required>\n                                <input type="hidden" name="variable_names[]">\n                            </div>\n                            <div class="col-xl-4 col-md-6 col-12 mt-2 mt-md-0">\n                                <input type="text" class="form-control inputFieldDesign new-field" placeholder="${jsLang("Placeholder Description")}" id="description-${count}" maxlength="191" name="descriptions[]" oninvalid="this.setCustomValidity('${jsLang("This field is required.")}')" required>\n                            </div>\n                            <div class="col-xl-3 col-md-6 col-12 mt-2 mt-xl-0">\n                                <select class="form-select form-control inputFieldDesign new-field sl_common_bx" id="type-${count}" name="type[]">\n                                    <option value="" selected> ${jsLang("Select One")} </option>\n                                    <option value="text"> ${jsLang("Input Field")} </option>\n                                    <option value="textarea"> ${jsLang("Textarea Field")} </option>\n                                </select>\n                            </div>\n                            <span onclick="removeFields(this)" class="input-group-text bg-transparent cursor_pointer rounded h-40 col-xl-1 col-md-6 col-12 w-auto mt-2 mt-xl-0 ms-2">\n                                <i class="feather icon-trash-2"></i>\n                            </span>\n                        </div>`;count++,t.append(d)}function addButton(e){var t=$(e).closest("div.row").find('input[name="names[]"]').first();$(t).next().val(t.prop("id"))}function removeFields(e){const t=$("#field-container").find("div.row");if(1==$("#field-container").closest("div.col-sm-10").find("div.dynamic_field").first().length&&t.length>=1||t.length>1){const t=$(e).closest("div.row").find('input[name="names[]"]').first();let n=document.getElementById(t.prop("id")+"-button");if(n){n.remove(),$(e.parentElement).hasClass("row")&&$(e.parentElement.nextElementSibling?.firstElementChild).removeClass("mt-3").addClass("top"),$(e.parentElement).hasClass("row top")&&$(e.parentElement.nextElementSibling).removeClass("mt-3").addClass("top");let i=" [["+t.prop("id")+"]] ",l=$("#input_template").val().split(i.trim());$("#input_template").val(l.join(""))}e.parentElement.remove()}}function insertText(e){var t=" [["+e.innerHTML.trim()+"]] ",n=document.getElementById("input_template").selectionStart;let i=$("#input_template").val();$("#input_template").val(i.slice(0,n)+t+i.slice(n)),$("#input_template").focus()}function validateCheck(e){let t=!0;document.querySelectorAll(".new-field").forEach((t=>{t.addEventListener("input",(()=>{const e=t.value.trim(),n=t.closest("div").querySelector(".error");n&&(n.style.display=""!==e?"none":"block")})),e.push("#"+t.id)}));for(const n in e)""==$(e[n]).val().length&&0==$(e[n]).siblings(".error").length?($(e[n]).parent().append(`<label class="error">${jsLang("This field is required.")}</label>`),t=!1):""==$(e[n]).val().length&&(t=!1);return t}