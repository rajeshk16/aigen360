"use strict";function metaValueChange(e){let a="";a="1"==document.getElementById("meta_"+e).value?document.getElementById("meta_"+e).value="0":document.getElementById("meta_"+e).value="1";let t=document.getElementsByName("team_id")[0].value,n=document.getElementById("metaField_"+e).value;$.ajax({url:UPDATE_MEMBER_META,type:"POST",data:{_token:CSRF_TOKEN,team_id:t,metaField:n,metaValue:a},contentType:"application/x-www-form-urlencoded; charset=UTF-8",cache:!1,processData:!0,dataType:"JSON",beforeSend(){$(".member-loader").removeClass("hidden"),$(".update-profile-button").attr("disabled","disabled"),$(".member-meta-value").attr("disabled","disabled")},success:function(e){toastMixin.fire({title:e.message,icon:"fail"==e.status?"error":e.status})},complete(){$(".member-loader").addClass("hidden"),$(".update-profile-button").removeAttr("disabled"),$(".member-meta-value").removeAttr("disabled")}})}$(".open-email-modal").on("click",function(){$(".profile-modal").css("display","flex"),$(".existing-mail-container").show(),$(".otp-container , .new-email-container").hide()}),$(".modal-close-btn").on("click",function(){$(".profile-modal, .password-modal, .member-link-modal").css("display","none")}),$(".mainForm").on("submit",function(e){e.preventDefault(),$.ajax({url:UPDATE_PROFILE,type:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,dataType:"JSON",beforeSend(){$(".update-profile-loader").removeClass("hidden"),$(".update-profile-button").attr("disabled","disabled")},success:function(e){toastMixin.fire({title:e.message,icon:"fail"==e.status?"error":e.status})},complete(){$(".update-profile-loader").addClass("hidden"),$(".update-profile-button").removeAttr("disabled")}})}),$(".open-password-modal").on("click",function(){$(".password-modal").css("display","flex"),$(".password-modal-container").show()}),$("#close-btn").on("click",function(){$("#updatePasswordForm").trigger("reset")}),$("#otpForm-close-btn").on("click",function(){$("#otpForm").trigger("reset")}),$("#updateEmailForm-close-btn").on("click",function(){$("#updateEmailForm").trigger("reset")}),$("#updatePasswordForm").on("submit",function(e){e.preventDefault();var a=$("#old_password").val(),t=$("#new_password").val(),n=$("#confirm_password").val(),i=$('input[name="_token"]').val();$.ajax({url:UPDATE_PASSWORD,type:"POST",data:{old_password:a,new_password:t,confirm_password:n,_token:i},dataType:"JSON",beforeSend(){$(".password-loader").removeClass("hidden")},success:function(e){"success"==e.status?($(".password-modal").css("display","none"),$(".password-modal-container").hide(),$("#updatePasswordForm").trigger("reset")):"fail"==e.status&&$(".password-modal-container").show(),toastMixin.fire({title:e.message,icon:"fail"==e.status?"error":e.status})},complete(){$(".password-loader").addClass("hidden")},error:function(){$(".password-modal-container").hide()}})}),$("#checkEmailForm").on("submit",function(e){e.preventDefault();var a=$("#email").val(),t=$('input[name="_token"]').val();$.ajax({url:VERIFY_EMAIL,type:"POST",data:{email:a,_token:t},dataType:"JSON",beforeSend(){$(".email-loader").removeClass("hidden")},success:function(e){"success"==e.status?"token"===e.preference?($(".profile-modal").css("display","none"),$(".existing-mail-container, .otp-container, .new-email-container").hide()):($(".otp-container").show(),$(".existing-mail-container, .new-email-container").hide()):"fail"==e.status&&($(".existing-mail-container").show(),$(".otp-container, .new-email-container").hide()),toastMixin.fire({title:e.message,icon:"fail"==e.status?"error":e.status})},complete(){$(".email-loader").addClass("hidden")},error:function(){$(".profile-modal").css("display","none"),$(".existing-mail-container, .otp-container, .new-email-container").hide()}})}),$("#otpForm").on("submit",function(e){e.preventDefault();var a=$("#otp").val(),t=$('input[name="_token"]').val();$.ajax({url:VERIFY_OTP,type:"POST",data:{otp:a,_token:t},dataType:"JSON",beforeSend(){$(".email-loader").removeClass("hidden")},success:function(e){"success"==e.status?($(".new-email-container").show(),$(".existing-mail-container, .otp-container").hide()):"fail"==e.status&&($(".otp-container").show(),$(".existing-mail-container, .new-email-container").hide()),$("#otpForm").trigger("reset"),toastMixin.fire({title:e.message,icon:"fail"==e.status?"error":e.status})},complete(){$(".email-loader").addClass("hidden")},error:function(){$(".profile-modal").css("display","none"),$(".existing-mail-container, .otp-container, .new-email-container").hide()}})}),$("#updateEmailForm").on("submit",function(e){e.preventDefault();var a=$("#new_email").val(),t=$('input[name="_token"]').val();$.ajax({url:UPDATE_EMAIL,type:"POST",data:{new_email:a,_token:t},dataType:"JSON",beforeSend(){$(".email-loader").removeClass("hidden")},success:function(e){"success"==e.status?($("#update_email").val(a),$("#email").val(a),$(".profile-modal").css("display","none"),$(".existing-mail-container, .otp-container, .new-email-container").hide(),$("#updateEmailForm").trigger("reset")):"fail"==e.status&&($(".new-email-container").show(),$(".existing-mail-container, .otp-container").hide()),toastMixin.fire({title:e.message,icon:"fail"==e.status?"error":e.status})},complete(){$(".email-loader").addClass("hidden")},error:function(){$(".profile-modal").css("display","none"),$(".existing-mail-container, .otp-container, .new-email-container").hide()}})}),$("#memberLinkSendEmail").on("submit",function(e){e.preventDefault();var a=$("#member_email").val(),t=$('input[name="_token"]').val();$.ajax({url:MEMBER_INVITATION_EMAIL_FROFILE,type:"POST",data:{email:a,_token:t},dataType:"JSON",beforeSend(){$(".member-loader").removeClass("hidden")},success:function(e){"success"==e.status?"token"===e.preference?($(".profile-modal").css("display","none"),$(".existing-mail-container, .otp-container, .new-email-container").hide()):($(".otp-container").show(),$(".existing-mail-container, .new-email-container").hide()):"fail"==e.status&&($(".existing-mail-container").show(),$(".otp-container, .new-email-container").hide()),toastMixin.fire({title:e.message,icon:"fail"==e.status?"error":e.status})},complete(){$(".member-loader").addClass("hidden"),$(".member-link-modal").hide(),$("#member_email").val("")},error:function(){$(".profile-modal").css("display","none"),$(".existing-mail-container, .otp-container, .new-email-container").hide()}})}),$(".open-member-link-modal").on("click",function(){$(".member-link-modal").css("display","flex"),$(".member-link-show").show()}),$(".memberForm").on("submit",function(e){e.preventDefault(),$.ajax({url:UPDATE_MEMBER,type:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,dataType:"JSON",beforeSend(){$(".update-profile-loader").removeClass("hidden"),$(".update-profile-button").attr("disabled","disabled")},success:function(e){toastMixin.fire({title:e.message,icon:"fail"==e.status?"error":e.status})},complete(){$(".update-profile-loader").addClass("hidden"),$(".update-profile-button").removeAttr("disabled")}})});